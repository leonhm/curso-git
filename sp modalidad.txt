---------------------------------------------------------------	
			STORE PROCEDURES
---------------------------------------------------------------	
CREATE OR REPLACE PROCEDURE DBCBPPAG.SP_REGISTRAR_MODALIDAD

   (VAR_COD_MODALIDAD   	CBPPAG_MODALIDAD.COD_MODALIDAD%TYPE,
    VAR_COD_PERIODO		CBPPAG_MODALIDAD.COD_PERIODO_ACADEMICO%TYPE,
    VAR_NOM_MODALIDAD   	CBPPAG_MODALIDAD.NOM_MODALIDAD%TYPE,
    VAR_DESC_MODALIDAD   	CBPPAG_MODALIDAD.DESC_MODALIDAD%TYPE
    ) AUTHID CURRENT_USER AS
    
BEGIN        
    INSERT INTO CBPPAG_MODALIDAD 
		(COD_MODALIDAD, COD_PERIODO_ACADEMICO, NOM_MODALIDAD, DESC_MODALIDAD)			
    	   VALUES (VAR_COD_MODALIDAD, VAR_COD_PERIODO, VAR_NOM_MODALIDAD, VAR_DESC_MODALIDAD); 

END SP_REGISTRAR_MODALIDAD;


CREATE OR REPLACE PROCEDURE DBCBPPAG.SP_MODIFICAR_MODALIDAD

   (VAR_COD_MODALIDAD   	CBPPAG_MODALIDAD.COD_MODALIDAD%TYPE,
    VAR_COD_PERIODO		CBPPAG_PERIODO_ACADEMICO.COD_PERIODO_ACADEMICO%TYPE,
    VAR_NOM_MODALIDAD   	CBPPAG_MODALIDAD.NOM_MODALIDAD%TYPE,
    VAR_DESC_MODALIDAD   	CBPPAG_MODALIDAD.DESC_MODALIDAD%TYPE
    ) AUTHID CURRENT_USER AS
    
BEGIN        
    UPDATE CBPPAG_MODALIDAD 
	SET NOM_MODALIDAD=SP_MODIFICAR_MODALIDAD.VAR_NOM_MODALIDAD,
	    COD_PERIODO_ACADEMICO=SP_MODIFICAR_MODALIDAD.VAR_COD_PERIODO,			
    	    DESC_MODALIDAD=SP_MODIFICAR_MODALIDAD.VAR_DESC_MODALIDAD
	WHERE COD_MODALIDAD=SP_MODIFICAR_MODALIDAD.VAR_COD_MODALIDAD;

END SP_MODIFICAR_MODALIDAD;


CREATE OR REPLACE PROCEDURE DBCBPPAG.SP_ELIMINAR_MODALIDAD

   (VAR_COD_MODALIDAD   	CBPPAG_MODALIDAD.COD_MODALIDAD%TYPE
    ) AUTHID CURRENT_USER AS
    
BEGIN        
    DELETE CBPPAG_MODALIDAD 
	WHERE COD_MODALIDAD=SP_ELIMINAR_MODALIDAD.VAR_COD_MODALIDAD;

END SP_ELIMINAR_MODALIDAD;


---------------------------------------------------------------	
			PACKAGES
---------------------------------------------------------------	
CREATE OR REPLACE PACKAGE PKG_MODALIDAD
IS
    type modalidad_salida is ref cursor;
    PROCEDURE SP_BUSCAR_MODALIDAD(VAR_NOM_MODALIDAD in varchar2, xSalida OUT modalidad_salida);	
    PROCEDURE SP_REGISTRAR_MODALIDAD(VAR_COD_MODALIDAD in varchar2, VAR_COD_PERIODO in varchar2, VAR_NOM_MODALIDAD in varchar2, VAR_DESC_MODALIDAD in varchar2);
    PROCEDURE SP_MODIFICAR_MODALIDAD(VAR_COD_MODALIDAD in varchar2, VAR_COD_PERIODO in varchar2, VAR_NOM_MODALIDAD in varchar2, VAR_DESC_MODALIDAD in varchar2);
    PROCEDURE SP_ELIMINAR_MODALIDAD(VAR_COD_MODALIDAD in varchar2);
END PKG_MODALIDAD;

---------------------------------------------------------------	
			BODY
---------------------------------------------------------------

CREATE OR REPLACE PACKAGE BODY PKG_MODALIDAD 
as
    PROCEDURE SP_BUSCAR_MODALIDAD
    	(VAR_NOM_MODALIDAD in varchar2, xSalida OUT modalidad_salida) 
    	IS
	begin
	     open xSalida for
	     select MO.COD_MODALIDAD, PA.COD_PERIODO_ACADEMICO, MO.NOM_MODALIDAD,MO.DESC_MODALIDAD 
	     from CBPPAG_MODALIDAD MO, CBPPAG_PERIODO_ACADEMICO PA
             where MO.NOM_MODALIDAD = VAR_NOM_MODALIDAD;
    END;
    
    PROCEDURE SP_REGISTRAR_MODALIDAD(VAR_COD_MODALIDAD in varchar2, VAR_COD_PERIODO in varchar2, VAR_NOM_MODALIDAD in varchar2, VAR_DESC_MODALIDAD in varchar2)
    AS
    BEGIN        
    INSERT INTO CBPPAG_MODALIDAD 
		(COD_MODALIDAD, COD_PERIODO_ACADEMICO, NOM_MODALIDAD, DESC_MODALIDAD)			
    	   VALUES (VAR_COD_MODALIDAD, VAR_COD_PERIODO, VAR_NOM_MODALIDAD, VAR_DESC_MODALIDAD); 

    END;
    
    PROCEDURE SP_MODIFICAR_MODALIDAD(VAR_COD_MODALIDAD in varchar2, VAR_COD_PERIODO in varchar2, VAR_NOM_MODALIDAD in varchar2, VAR_DESC_MODALIDAD in varchar2)
    AS
    BEGIN        
        UPDATE CBPPAG_MODALIDAD 
        SET NOM_MODALIDAD=SP_MODIFICAR_MODALIDAD.VAR_NOM_MODALIDAD,
            COD_PERIODO_ACADEMICO=SP_MODIFICAR_MODALIDAD.VAR_COD_PERIODO,			
                DESC_MODALIDAD=SP_MODIFICAR_MODALIDAD.VAR_DESC_MODALIDAD
        WHERE COD_MODALIDAD=SP_MODIFICAR_MODALIDAD.VAR_COD_MODALIDAD;
    
    END;
    
    PROCEDURE SP_ELIMINAR_MODALIDAD(VAR_COD_MODALIDAD in varchar2) 
    AS    
    BEGIN        
    DELETE FROM CBPPAG_MODALIDAD 
	WHERE COD_MODALIDAD=SP_ELIMINAR_MODALIDAD.VAR_COD_MODALIDAD;

    END;    
END;




		

















